<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025 Shared Calendar</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        table { width: 90%; margin: 20px auto; border-collapse: collapse; }
        th, td { border: 1px solid #ccc; padding: 10px; text-align: center; }
        th { background: #f4f4f4; }
        textarea { width: 90%; height: 50px; }
        button { margin-top: 10px; padding: 5px 10px; }
    </style>
</head>
<body>

    <h2>2025 Shared Calendar</h2>
    <label for="month">Select Month:</label>
    <select id="month" onchange="loadCalendar()">
        <script>
            const months = ["January", "February", "March", "April", "May", "June",
                            "July", "August", "September", "October", "November", "December"];
            months.forEach((m, i) => {
                document.write(`<option value="${i}">${m}</option>`);
            });
        </script>
    </select>

    <table>
        <thead>
            <tr>
                <th>Monday</th> <th>Tuesday</th> <th>Wednesday</th> <th>Thursday</th> 
                <th>Friday</th> <th>Saturday</th> <th>Sunday</th>
            </tr>
        </thead>
        <tbody id="calendar-body"></tbody>
    </table>

    <button onclick="saveNotes()">Save Notes</button>

    <script>
        // Replace with your Firebase configuration
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT_ID.appspot.com",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        function getFirstMonday(year, month) {
            let date = new Date(year, month, 1);
            while (date.getDay() !== 1) { date.setDate(date.getDate() + 1); }
            return date.getDate();
        }

        function loadCalendar() {
            let year = 2025;
            let month = parseInt(document.getElementById("month").value);
            let firstMonday = getFirstMonday(year, month);
            let daysInMonth = new Date(year, month + 1, 0).getDate();
            let calendarBody = document.getElementById("calendar-body");
            calendarBody.innerHTML = "";

            let date = firstMonday;
            let row = "<tr>";

            for (let i = 1; i < firstMonday; i++) row += "<td></td>"; // Empty before first Monday

            for (let d = firstMonday; d <= daysInMonth; d++) {
                row += `<td>${d}<br><textarea id="day-${month}-${d}"></textarea></td>`;
                if ((d - firstMonday + 1) % 7 === 0 || d === daysInMonth) {
                    row += "</tr>";
                    calendarBody.innerHTML += row;
                    row = "<tr>";
                }
            }

            loadNotes();
        }

        function saveNotes() {
            let month = document.getElementById("month").value;
            let daysInMonth = new Date(2025, parseInt(month) + 1, 0).getDate();
            let notesData = {};

            for (let d = 1; d <= daysInMonth; d++) {
                let note = document.getElementById(`day-${month}-${d}`);
                if (note) notesData[d] = note.value;
            }

            db.collection("calendar-2025").doc(month).set(notesData)
                .then(() => alert("Notes saved successfully!"))
                .catch(error => console.error("Error saving notes: ", error));
        }

        function loadNotes() {
            let month = document.getElementById("month").value;
            db.collection("calendar-2025").doc(month).get()
                .then(doc => {
                    if (doc.exists) {
                        let data = doc.data();
                        for (let d in data) {
                            let note = document.getElementById(`day-${month}-${d}`);
                            if (note) note.value = data[d];
                        }
                    }
                })
                .catch(error => console.error("Error loading notes: ", error));
        }

        window.onload = loadCalendar;
    </script>
</body>
</html>
